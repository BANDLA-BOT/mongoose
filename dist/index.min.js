"use strict";var express=require("express"),mongoose=require("mongoose"),cors=require("cors"),User=require("./models/todos/user.models.js"),Orders=require("./models/ecommerce/order.models.js");mongoose.connect("mongodb://localhost:27017/DataModelling").then(function(){console.log("Database connected")}).catch(function(e){console.log(e.message)});var app=express();app.use(express.json()),app.use(cors()),app.post("/",function(r,s){var n;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new Orders({orderPrice:r.body.orderPrice,address:r.body.address}),e.next=4,regeneratorRuntime.awrap(n.save());case 4:s.json({message:"Order created",order:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s.status(500).json({message:"Internal server error",error:e.t0.message});case 10:case"end":return e.stop()}},null,null,[[0,7]])}),app.put("/put/:id/:customerId",function(r,s){var n,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.params,t=n.id,n.customerId,e.next=4,regeneratorRuntime.awrap(Orders.findOneAndUpdate({_id:t},{$push:{customer:r.params.customerId}}));case 4:e.sent,s.json({message:"ADDED"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s.json({message:"Internal server Error",error:e.t0.message});case 11:case"end":return e.stop()}},null,null,[[0,8]])}),app.get("/orders",function(e,r){var s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Orders.find().populate("customer"));case 3:s=e.sent,r.json({orders:s}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},null,null,[[0,7]])}),app.get("/get",function(e,r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:try{r.json({message:"Queried",user:user})}catch(e){r.json({message:"Internal server error",error:e.message})}case 1:case"end":return e.stop()}})}),app.listen(8e3,function(){console.log("Running")});
//# sourceMappingURL=index.min.js.map
